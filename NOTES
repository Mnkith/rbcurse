NOTES
=====
/// vim:ts=4:sw=4:tw=80:ai:formatoptions=tcqnl:
/// this was posted with appenddiary.sh

Subject: Update rubyforge
-------------------------

To update the file named index.html on rubyforge use this. password is in  
rubyforge config file.

      scp index.html rkumar@rubyforge.org:/var/www/gforge-projects/rbcurse

* * *

Subject: subwin benefit
-----------------------
Date: 2009-10-09 23:32 

Just found out after playing with subwins that they don't let you write onto  
the window below. Perfect for us for components that overwrite!!  However, no  
way to hide a subwin for later display

* * *

Subject: Upgrading widgets
--------------------------
Date: 2009-11-02 14:45

1. We need to use `create_buffer` either in constructor or repaint  or whenever
   you are likely to have a width and height.  Recommended in beginning of
   repaint().
Use `safe_create_buffer`

2. Use `@buffer_modified = true` in repaint

3. Ensure print_border and printstring are getting correct coordinates.  Most
   errors happen here.

4. Replace @form.window with @graphic

rtestwidget is a converted form of rtextview that runs in scrollpane.
See testscrollp.rb

* * *


Subject: Scrollpane's form
--------------------------
Date: 2009-12-27 20:08

Since scrollpane's child object has no form, scrollpane needs to have its own form 
and hand it to child object. However, set_form was overwriting the existing @graphic
so nothing was printed.
Had to put a check so graphic (buffer) not overwritten. Now the child object does
print correctly with a form object. No crashing regarding nil form.

1. Container objects such as scrollpane and splitpane which have widgets
   with nil forms require to create a form using existing graphic object
   as window and hand that to the child objects.

* * * * * * * *

Subject: Moving cursor in ScrollPane's child
--------------------------------------------
Date: 2009-12-28 23:19

Since child has its own form, had to hack an if clause in child object
(ListScrollable in the case of Textarea) to modify parent forms row and col.
Also added a parent_form in form.

However, this needs to be done in scrollpane or other higher up place, so i
don't have to keep doing it.

ALso what if there are multiple objects in a heirarchy. Splitpane contains
another Splitpane which contains some object. The setting must bubble up all the
way.

* * * * * * * *

Subject: class Form - set_form_rowcol
-------------------------------------
Date: 2009-12-29 15:28

Form should have a method rather than allow direct setting.
This method can percolate up to a parent form if not the same as current.

* * * * * * * *

Subject: More on scrollpane and other widgets
---------------------------------------------
Date: 2009-12-30 18:03

I have added a Form.rows_panned and cols_panned, so that a form know 
how much its objects have been panned by. Otherwise there was no way
of Textarea knowing it had been panned. It would keep resetting the
cursor to the wrong value. rows_panned allows it to account for panning
so the cursor can flash at where insertion is happening.
See Scrollpane, handle_keys, around line 224.

* * * * * * * *

Subject: Scrollpane's cursor out of bounds - known bug
------------------------------------------------------
Date: 2009-12-31 09:42

I've tried various ways to handle this - currently a variable named
outofbounds. However, some little logic error causes the cursor
to lose synch with the caret (insertion point).

So until I can sort that out, we live with the cursor going cruising
across the screen, although it does remain very true to the insertion
point so no data can get mucked up.

* * * * * * * *

Subject: more thoughts on cursor display
----------------------------------------
Date: 2009-12-31 17:14

I deleted the todo item regarding widgets maintain cursor display
themselves, but now i think the insertion point is specfic to some
widgets not all, and that the widget should perhaps maintain it
themselves.

Most widgets highlight a line or item within. There is no editing
happening. On a GUI there really is no cursor. However, textfields and
textareas do have an insertion point (caret?). If they maitain their own
insertion points, then when they are hidden or panned, the cursor would
get hidden automatically since i assume its painted onto the buffer or
pad.

For example, tabbedpanes work just fine in these widgets since they take
care fo their ownfocssing and selection.

* * * * * * * *

Subject: Textarea overwrite problem
-----------------------------------
Date: 2010-01-03 17:54

I think it's like this.. (reference test2.rb sample program)

Textarea uses a pad, which does a `prefresh` onto screen.
All the other widgets (unbuffered) write to a window which does a
`wrefresh`. This refresh overwrites the write that `prefresh` did.

Acco to the manpage, certain optimizations are done with what is
already there on the screen. My guess is that a window wrefresh does not
disturb what is on the right, but it does overwrite what's on the left.

Now, scrollpane and splitpane use a `buffer_to_screen` passing their own
graphic object, so the main window is written onto. I need to confirm
this by placing something on the right. Here, since textarea was not a
child or embedded object, a `pad.refresh` was done.

I think i need to ensure that a `copy_pad_to_win` is done in these cases,
by passing a graphic object. At least the source of this bug is now
clear to me now.

* * * * * * * *
